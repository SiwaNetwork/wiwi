# RANDOM_SYNC_2017MHZ_V2 - Синхронизация по радиоканалу на частоте 2017 МГц

## Обзор проекта

**RANDOM_SYNC_2017MHZ_V2** - это проект разработки оборудования ретрансляции фазовой синхронизации по радиолинии на частоте 2017 МГц (LTE Band 34, TDD) с использованием гибридной архитектуры WiWi + AD9361.

Проект направлен на создание высокоточного оборудования синхронизации времени для телекоммуникационных систем, соответствующего требованиям ТЗ МТС и стандарту ITU-T G.8275.1.

## Ключевые особенности

### 🎯 Основные характеристики
- **Целевая частота:** 2017 МГц (LTE Band 34, TDD)
- **Точность синхронизации:** ±300 нс (цель), ±1 мкс (фаза 1)
- **Протокол:** PTP (IEEE 1588-2008) с профилем G.8275.1
- **Архитектура:** Master/Slave модули с GNSS синхронизацией

### 🔧 Технические инновации
- **Гибридная архитектура:** Комбинация проверенной платформы WiWi с современным AD9361
- **Hardware timestamping:** Аппаратная временная привязка для PTP
- **Многосистемная GNSS:** Поддержка GPS, GLONASS, Galileo, BeiDou
- **Расширенный температурный диапазон:** -40°C до +55°C

### 📊 Преимущества решения
- **Экономия разработки:** 60-70% благодаря базе WiWi
- **Высокая надежность:** Использование проверенных компонентов
- **Гибкость:** Легкая адаптация под различные требования
- **Масштабируемость:** Поддержка нескольких радиоинтерфейсов

## Архитектура системы

### Структурная схема
```
┌─────────────────────────────────────────────────────────────────┐
│                    Master/Slave модуль                          │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────┐ │
│  │   GNSS      │  │   STM32H7   │  │   AD9361    │  │  SFP    │ │
│  │  Антенна    │  │   Control   │  │   Radio     │  │  Ports  │ │
│  │  (SMA)      │◄►│   + PTP     │◄►│   Transc.   │◄►│ (3x)    │ │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────┘ │
│           │              │                 │              │       │
│           ▼              ▼                 ▼              ▼       │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────┐ │
│  │   OCXO      │  │    ECP5     │  │   Ethernet  │  │ Power   │ │
│  │  ±0.05ppm   │  │    FPGA     │  │   + PTP     │  │ Supply  │ │
│  │  Generator  │◄►│   I/Q Proc  │◄►│   Hardware  │◄►│ -48V DC │ │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

## Фазы разработки

### ✅ Фаза 1: Базовая архитектура (Текущая)
**Статус:** В разработке
**Сроки:** 8-10 недель
**Цели:**
- Создание базовой архитектуры на STM32H7 + AD9361 + ECP5 FPGA
- Реализация PTP стека с hardware timestamping
- Достижение точности синхронизации ±1 мкс
- Интеграция с GNSS приемником

### 📋 Фаза 2: Оптимизация точности
**Сроки:** Апрель-май 2025
**Цели:**
- Достижение целевой точности ±300 нс
- Оптимизация алгоритмов компенсации задержек
- Расширение температурного диапазона до -40°C до +55°C

### 🔧 Фаза 3: Полная интеграция
**Сроки:** Июнь-июль 2025
**Цели:**
- Интеграция с оборудованием заказчика
- Разработка системы управления и мониторинга
- Сертификация и подготовка к производству

## Компоненты системы

### Основные компоненты
- **STM32H747XIHx** - ARM Cortex-M7 480 МГц микроконтроллер
- **AD9361BBCZ** - Широкополосный SDR трансивер (70 МГц - 6 ГГц)
- **Lattice ECP5-5G** - FPGA для цифровой обработки сигналов
- **OCXO ±0.05ppm** - Высокостабильный генератор частоты
- **Многосистемный GNSS** - GPS/GLONASS/Galileo/BeiDou приемник

### Интерфейсы
- **Радиоинтерфейс:** 2017 МГц, TDD режим, адаптивная модуляция
- **Сетевые интерфейсы:** 3x SFP порта с hardware timestamping
- **Управление:** Ethernet RJ-45 + REST API + SNMP
- **Синхронизация:** GNSS SMA вход + PPS выход

## Программное обеспечение

### Архитектура ПО
```
┌─────────────────────────────────────────────────────────┐
│                    Прикладной уровень                    │
├─────────────────────────────────────────────────────────┤
│  REST API │ SNMP │ PTP Application │ Sync Algorithms   │
├─────────────────────────────────────────────────────────┤
│                    Транспортный уровень                   │
├─────────────────────────────────────────────────────────┤
│  UDP/IP │ PTP Protocol │ Radio Control │ FPGA Interface │
├─────────────────────────────────────────────────────────┤
│                     Аппаратный уровень                    │
├─────────────────────────────────────────────────────────┤
│  STM32H7 HAL │ FPGA Drivers │ AD9361 Drivers │ PHY Drivers │
└─────────────────────────────────────────────────────────┘
```

### Ключевые модули
- **PTP Engine** - Реализация PTP протокола с hardware timestamping
- **Radio Controller** - Управление AD9361 для работы на 2017 МГц
- **Sync Algorithms** - Алгоритмы точной синхронизации (PID, Kalman)
- **GNSS Interface** - Интеграция с многосистемным GNSS приемником

## Требования к оборудованию

### Энергопотребление
- **Master модуль:** До 25 Вт
- **Slave модуль:** До 20 Вт
- **Питание:** -48V DC (-36V до -57V)

### Габаритные размеры
- **Форм-фактор:** 1U 19" rackmount
- **Размеры:** 482×44×300 мм
- **Масса:** Не более 3 кг

### Температурный режим
- **Рабочий:** -40°C до +55°C
- **Хранение:** -50°C до +70°C
- **Охлаждение:** Активное + пассивное

## Критерии успеха

### Фаза 1 (текущая)
- [ ] Стабильная работа на частоте 2017 МГц
- [ ] Точность синхронизации не хуже ±1 мкс
- [ ] Успешный обмен PTP пакетами между Master и Slave
- [ ] Стабильный прием GNSS сигналов

### Общие критерии
- [ ] Соответствие требованиям ТЗ МТС
- [ ] Стабильная работа в течение 24 часов
- [ ] Электромагнитная совместимость (ГОСТ Р 51317.4.5-99)
- [ ] Грозозащита уровня 4 (IEC 61000-4-5)

## Документация

### Техническая документация
- [📋 Техническое задание фазы 1](./docs/PHASE1_TECHNICAL_SPEC.md)
- [🏗️ Архитектура системы](./docs/ARCHITECTURE.md)
- [📅 План разработки](./docs/DEVELOPMENT_PLAN.md)

### Исходный код
- [🔧 Firmware для STM32H7](./firmware/stm32h7/)
- [🎛️ FPGA логика](./firmware/fpga/)
- [📡 PTP стек](./software/ptp_stack/)

## Команда разработки

| Роль | Ответственность | Статус |
|------|-----------------|---------|
| **Ведущий инженер** | Архитектура, интеграция | Активен |
| **RF инженер** | AD9361, радиотестирование | Активен |
| **Программист встраиваемых систем** | STM32H7 драйверы, PTP | Активен |
| **FPGA инженер** | Логика обработки сигналов | Активен |
| **Инженер по синхронизации** | Алгоритмы точности | Активен |

## Контакты

Для вопросов по разработке, технической поддержке или коммерческому использованию обращайтесь к команде разработки.

---

**Создано:** Январь 2025
**Версия:** 1.0.0
**Статус:** Активная разработка
